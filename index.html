<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Homepage for Cable Tray Route workflow.">
  <title>Cable Tray Route</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="top-nav">
    <a href="index.html">Home</a>
    <a href="ductbankroute.html">Ductbank</a>
    <a href="cabletrayfill.html">Tray Fill</a>
    <a href="conduitfill.html">Conduit Fill</a>
    <a href="cableschedule.html">Cable Schedule</a>
    <a href="racewayschedule.html">Raceway Schedule</a>
    <a href="optimalRoute.html">Optimal Route</a>
    <button id="settings-btn" class="settings-btn" aria-label="Settings" aria-expanded="false">âš™</button>
  </nav>
  <div id="settings-menu" class="settings-menu">
    <label><input type="checkbox" id="dark-toggle"> Dark Mode</label>
    <button id="help-btn" aria-expanded="false">Site Help</button>
  </div>
  <header class="hero" role="banner">
    <h1>Integrated Cable Routing Workflow</h1>
  </header>
  <div class="container">
    <main class="main-content">
      <section class="about" id="about">
        <h2>Why CableTrayRoute?</h2>
        <p>CableTrayRoute streamlines electrical design by linking scheduling, analysis, and routing tools in one browser-based workflow. Engineers can define cables, assess tray and conduit capacity, and generate optimal paths without juggling spreadsheets. Automated checks against fill limits and thermal constraints reduce errors and rework. The unified interface accelerates planning and helps deliver consistent, code-compliant results on complex projects.</p>
      </section>
      <section class="card">
        <h2>Workflow</h2>
        <div class="workflow-grid">
          <a href="cableschedule.html" class="workflow-card">
            <img src="icons/cable.svg" alt="Cable icon" class="workflow-icon">
            <span>1. Cable Schedule</span>
          </a>
          <a href="racewayschedule.html" class="workflow-card">
            <img src="icons/raceway.svg" alt="Raceway icon" class="workflow-icon">
            <span>2. Raceway Schedule</span>
          </a>
          <a href="ductbankroute.html" class="workflow-card">
            <img src="icons/ductbank.svg" alt="Ductbank icon" class="workflow-icon">
            <span>3. Ductbank</span>
          </a>
          <a href="cabletrayfill.html" class="workflow-card">
            <img src="icons/tray.svg" alt="Tray icon" class="workflow-icon">
            <span>4. Tray Fill</span>
          </a>
          <a href="conduitfill.html" class="workflow-card">
            <img src="icons/conduit.svg" alt="Conduit icon" class="workflow-icon">
            <span>5. Conduit Fill</span>
          </a>
          <a href="optimalRoute.html" class="workflow-card">
            <img src="icons/route.svg" alt="Route icon" class="workflow-icon">
            <span>6. Optimal Cable Route</span>
          </a>
        </div>
      </section>
    </main>
  </div>
  <div id="help-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="help-title">
    <div class="modal-content">
      <button id="close-help-btn" class="close-btn" aria-label="Close Help">&times;</button>
      <h2 id="help-title">CableTrayRoute</h2>
      <p>Select a step to begin the workflow.</p>
    </div>
  </div>
  <script>
  window.addEventListener('DOMContentLoaded', () => {
    const darkToggle = document.getElementById('dark-toggle');
    const settingsBtn = document.getElementById('settings-btn');
    const settingsMenu = document.getElementById('settings-menu');
    const helpBtn = document.getElementById('help-btn');
    const helpModal = document.getElementById('help-modal');
    const closeHelpBtn = document.getElementById('close-help-btn');

    if(settingsBtn && settingsMenu){
      settingsBtn.addEventListener('click', () => {
        const expanded = settingsMenu.style.display === 'flex';
        settingsMenu.style.display = expanded ? 'none' : 'flex';
        settingsBtn.setAttribute('aria-expanded', String(!expanded));
      });
      document.addEventListener('click', e => {
        if(!settingsMenu.contains(e.target) && e.target !== settingsBtn){
          settingsMenu.style.display = 'none';
          settingsBtn.setAttribute('aria-expanded', 'false');
        }
      });
    }

    if(darkToggle){
      const sess = JSON.parse(localStorage.getItem('ctrSession') || '{}');
      if(sess.darkMode){
        document.body.classList.add('dark-mode');
        darkToggle.checked = true;
      }
      darkToggle.addEventListener('change', () => {
        document.body.classList.toggle('dark-mode', darkToggle.checked);
        const sess = JSON.parse(localStorage.getItem('ctrSession') || '{}');
        sess.darkMode = darkToggle.checked;
        localStorage.setItem('ctrSession', JSON.stringify(sess));
      });
    }

    if(helpBtn && helpModal && closeHelpBtn){
      helpBtn.addEventListener('click', () => {
        helpModal.style.display = 'flex';
        helpModal.setAttribute('aria-hidden','false');
      });
      closeHelpBtn.addEventListener('click', () => {
        helpModal.style.display = 'none';
        helpModal.setAttribute('aria-hidden','true');
      });
    }
  });
  </script>
</body>
</html>
