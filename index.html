<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Homepage for Cable Tray Route workflow.">
  <title>Cable Tray Route</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="top-nav">
    <a href="index.html">Home</a>
    <a href="ductbankroute.html">Ductbank</a>
    <a href="cabletrayfill.html">Tray Fill</a>
    <a href="conduitfill.html">Conduit Fill</a>
    <a href="cableschedule.html">Cable Schedule</a>
    <a href="racewayschedule.html">Raceway Schedule</a>
    <button id="settings-btn" class="settings-btn" aria-label="Settings" aria-expanded="false">âš™</button>
  </nav>
  <div id="settings-menu" class="settings-menu">
    <label><input type="checkbox" id="dark-toggle"> Dark Mode</label>
    <button id="help-btn" aria-expanded="false">Site Help</button>
  </div>
  <div class="container">
    <main class="main-content">
      <header class="page-header">
        <h1>Welcome</h1>
        <p>Follow the steps below to plan cable routes.</p>
      </header>
      <section class="card">
        <h2>Workflow</h2>
        <div class="workflow-grid">
          <a href="cableschedule.html" class="workflow-card">1. Cable Schedule</a>
          <a href="racewayschedule.html" class="workflow-card">2. Raceway Schedule</a>
          <a href="ductbankroute.html" class="workflow-card">3. Ductbank</a>
          <a href="cabletrayfill.html" class="workflow-card">4. Tray Fill</a>
          <a href="conduitfill.html" class="workflow-card">5. Conduit Fill</a>
          <a href="optimalRoute.html" class="workflow-card">6. Optimal Cable Route</a>
        </div>
      </section>
    </main>
  </div>
  <div id="help-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="help-title">
    <div class="modal-content">
      <button id="close-help-btn" class="close-btn" aria-label="Close Help">&times;</button>
      <h2 id="help-title">CableTrayRoute</h2>
      <p>Select a step to begin the workflow.</p>
    </div>
  </div>
  <script>
  window.addEventListener('DOMContentLoaded', () => {
    const darkToggle = document.getElementById('dark-toggle');
    const settingsBtn = document.getElementById('settings-btn');
    const settingsMenu = document.getElementById('settings-menu');
    const helpBtn = document.getElementById('help-btn');
    const helpModal = document.getElementById('help-modal');
    const closeHelpBtn = document.getElementById('close-help-btn');

    if(settingsBtn && settingsMenu){
      settingsBtn.addEventListener('click', () => {
        const expanded = settingsMenu.style.display === 'flex';
        settingsMenu.style.display = expanded ? 'none' : 'flex';
        settingsBtn.setAttribute('aria-expanded', String(!expanded));
      });
      document.addEventListener('click', e => {
        if(!settingsMenu.contains(e.target) && e.target !== settingsBtn){
          settingsMenu.style.display = 'none';
          settingsBtn.setAttribute('aria-expanded', 'false');
        }
      });
    }

    if(darkToggle){
      const sess = JSON.parse(localStorage.getItem('ctrSession') || '{}');
      if(sess.darkMode){
        document.body.classList.add('dark-mode');
        darkToggle.checked = true;
      }
      darkToggle.addEventListener('change', () => {
        document.body.classList.toggle('dark-mode', darkToggle.checked);
        const sess = JSON.parse(localStorage.getItem('ctrSession') || '{}');
        sess.darkMode = darkToggle.checked;
        localStorage.setItem('ctrSession', JSON.stringify(sess));
      });
    }

    if(helpBtn && helpModal && closeHelpBtn){
      helpBtn.addEventListener('click', () => {
        helpModal.style.display = 'flex';
        helpModal.setAttribute('aria-hidden','false');
      });
      closeHelpBtn.addEventListener('click', () => {
        helpModal.style.display = 'none';
        helpModal.setAttribute('aria-hidden','true');
      });
    }
  });
  </script>
</body>
</html>
